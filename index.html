<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>IndoMarket AI | Robot Trading Saham & Berita IHSG Realtime</title>
    <meta name="description"
        content="Aplikasi Robot Trading Indonesia dengan AI canggih. Analisis saham realtime, prediksi IHSG, dan berita pasar saham terlengkap. Dapatkan sinyal Buy/Sell akurat sekarang.">
    <meta name="keywords"
        content="saham indonesia, robot trading saham, ai saham, berita ihsg, analisis teknikal saham, sinyal saham, belajar saham, idx composite">
    <meta name="robots" content="index, follow">
    <meta name="author" content="IndoMarket AI">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="IndoMarket AI | Robot Trading & Berita Saham Indonesia">
    <meta property="og:description"
        content="Analisis saham otomatis dengan AI. Cek sinyal Buy/Sell dan berita pasar IHSG terbaru secara realtime.">
    <meta property="og:type" content="website">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/robot.css">

    <!-- Icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <!-- MQTT.js (Public Cloud Chat) -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>

<body>

    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="logo">
                <h1><i class='bx bx-news'></i> INDOMARKET <span class="text-primary">AI NEWS</span></h1>
            </div>
            <div class="status-bar">
                <div class="status-item clickable" onclick="openRssModal()"
                    style="cursor: pointer; background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 4px;"><i
                        class='bx bx-rss'></i> Manage RSS</div>
                <div class="status-item"><i class='bx bx-broadcast'></i> LIVE FEED</div>
                <div class="status-item text-primary"><i class='bx bx-refresh'></i> Auto-Update: 5 Mins</div>
                <div class="status-item"><i class='bx bx-time'></i> <span id="clock" class="font-mono">--:--:--</span>
                </div>
            </div>
        </header>

        <!-- Ticker Tape -->
        <div class="ticker-wrap">
            <div class="ticker" id="ticker-content">
                <!-- Injected via JS -->
            </div>
        </div>

        <!-- Search / Filter (Compact Row) -->
        <div class="search-bar-container"
            style="flex-direction: row; align-items: center; justify-content: space-between; gap: 20px;">
            <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                <!-- Online Status -->
                <div class="online-status-badge"
                    style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 20px; padding: 6px 14px; display: flex; align-items: center; gap: 8px; white-space: nowrap;">
                    <span class="pulsing-dot" style="margin:0;"></span>
                    <span id="online-count" style="font-size: 13px; font-weight: 700; color: var(--success);">1
                        Online</span>
                </div>

                <!-- Compact Search -->
                <div class="search-wrapper" style="padding: 8px 15px; border-radius: 20px; max-width: 400px; flex: 1;">
                    <i class='bx bx-search' style="font-size: 16px; color: var(--text-muted);"></i>
                    <input type="text" id="search-input" placeholder="Search ticker..." style="font-size: 13px;">
                </div>
            </div>

            <!-- Category Filters (Horizontal Scroll) -->
            <div class="filter-wrapper"
                style="flex-wrap: nowrap; overflow-x: auto; padding-bottom: 0; mask-image: linear-gradient(to left, transparent, black 10%);">
                <button class="filter-btn active" onclick="filterSource('all')">All</button>
                <button class="filter-btn text-warning" onclick="filterSource('1H')"><i class='bx bx-timer'></i>
                    1H</button>

                <div class="filter-group-label" style="font-size: 10px;">SECTOR:</div>
                <button class="filter-btn" onclick="filterSource('Banking')">Bank</button>
                <button class="filter-btn" onclick="filterSource('Mining-Coal')">Coal</button>
                <button class="filter-btn" onclick="filterSource('Mining-Gold')">Gold</button>
                <button class="filter-btn" onclick="filterSource('Mining-Nickel')">Nickel</button>
                <button class="filter-btn" onclick="filterSource('Property')">Prop</button>
                <button class="filter-btn" onclick="filterSource('Consumer')">Cons</button>
                <button class="filter-btn" onclick="filterSource('IPO')">IPO</button>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Main Feed (Now 2 Columns via CSS) -->
            <main class="news-feed-section">
                <div class="section-header">
                    <h2>Latest Market News</h2>
                    <div class="live-indicator">
                        <span class="pulsing-dot"></span> Real-time
                    </div>
                </div>

                <div id="news-container" class="news-grid">
                    <div class="loading-state">
                        <i class='bx bx-loader-alt bx-spin'></i> Aggregating Data...
                    </div>
                </div>
            </main>

            <!-- Sidebar -->
            <aside class="sidebar">



                <!-- Trading Robot Card -->
                <div class="card robot-card">
                    <div class="card-title" style="color:var(--primary); display:flex; align-items:center; gap:8px;">
                        <i class='bx bx-bot'></i> AI TRADING ROBOT
                    </div>
                    <div id="trading-robot-list" class="robot-grid">
                        <!-- Injected via JS -->
                    </div>
                    <small
                        style="display:block; margin-top:10px; color:var(--text-muted); font-size:10px; text-align:center;">
                        *Prediction for Tomorrow's Market Open
                    </small>
                </div>

                <!-- Expanded Watchlist -->
                <div class="card watchlist-card">
                    <div class="card-title text-success"><i class='bx bx-line-chart'></i> WATCHLIST BESOK</div>
                    <div id="tomorrow-watchlist" class="watchlist-grid">
                        <!-- Injected via JS -->
                    </div>
                </div>

                <!-- Removed Sentiment Gauge as requested -->

                <div class="card">
                    <div class="card-title">Top üîî BUY Signals</div>
                    <div id="top-buy-list" class="mini-list"></div>
                </div>

                <div class="card">
                    <div class="card-title">Top ‚ö†Ô∏è SELL Signals</div>
                    <div id="top-sell-list" class="mini-list"></div>
                </div>
            </aside>
        </div>
    </div>

    <!-- RSS Modal -->
    <div class="modal-overlay" id="rss-modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Manage RSS Feeds</h2>
                <button class="close-btn" onclick="closeRssModal()"><i class='bx bx-x'></i></button>
            </div>
            <div class="modal-body">
                <p style="font-size: 0.9em; color: #ccc; margin-bottom: 10px;">Add any <strong>RSS Feed URL</strong> or
                    even a standard <strong>Web Page URL</strong> (e.g., Detik, CNBC). The system will try to scrape
                    news automatically.</p>
                <div class="input-group" style="display:flex; gap:10px; margin-bottom:20px;">
                    <input type="text" id="rss-input" placeholder="https://example.com/news..."
                        style="flex:1; padding:10px; border-radius:6px; border:1px solid #444; background:#222; color:white;">
                    <button onclick="addRssFeed()" class="filter-btn active" style="padding: 0 20px;">Add</button>
                </div>
                <div class="filter-group-label">YOUR FEEDS:</div>
                <div id="rss-feed-list"
                    style="display:flex; flex-direction:column; gap:8px; max-height:300px; overflow-y:auto; margin-top: 10px;">
                    <!-- Feeds List -->
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Modal -->
    <div class="modal-overlay" id="analysis-modal">
        <div class="modal-content news-modal">
            <div class="modal-header">
                <div class="modal-stock-info">
                    <div class="modal-badge" id="modal-sentiment-badge">STRONG BUY</div>
                    <h2 id="modal-title">Laba BBCA Naik Significance</h2>
                </div>
                <button class="close-btn" onclick="closeModal()"><i class='bx bx-x'></i></button>
            </div>

            <div class="modal-body">
                <div class="modal-main-col">
                    <p class="modal-date" id="modal-date">Updated: Today, 14:00</p>
                    <p class="modal-summary" id="modal-summary">Full summary text...</p>

                    <div class="ai-insight-box">
                        <h3><i class='bx bx-brain'></i> AI Impact Analysis</h3>
                        <p id="modal-reason">This news is positive because...</p>
                    </div>

                    <a href="#" id="modal-source-link" target="_blank" class="read-more-btn">
                        Read Full Article Source <i class='bx bx-link-external'></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Chat Widget -->
    <div id="chat-widget" class="chat-widget collapsed">

        <!-- Chat Header (Click to Toggle) -->
        <div class="chat-header" onclick="toggleChat()">
            <div class="chat-title">
                <i class='bx bx-message-rounded-dots'></i> Live Chat
                <span class="chat-online-count" id="chat-online-count">(1)</span>
            </div>
            <i class='bx bx-chevron-up' id="chat-toggle-icon"></i>
        </div>

        <!-- Chat Body -->
        <div class="chat-body">
            <div class="chat-messages" id="chat-messages">
                <div class="chat-system-msg">Welcome to IndoMarket Live Chat!</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Type a message..." maxlength="100">
                <button id="chat-send-btn"><i class='bx bx-send'></i></button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/chat-service.js"></script>
    <script src="js/news_data.js"></script>
    <script src="js/stock_data.js"></script>
    <script src="js/rss-service.js"></script>
    <script src="js/data-service.js"></script>
    <script src="js/analysis.js"></script>
    <script src="js/main.js"></script>
</body>

</html>